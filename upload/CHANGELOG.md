## v.4.5.3
- Исправлена ошибка с `xfields NOT LIKE LIKE` в запросе на фильтрацию исключающих значений допполей.
- **Начиная с этой версии модуль поставляется в частично закодированном виде и с привязкой к домену.** На этот шаг пришлось пойти т.к. в последнее время участились случаи нарушения лицензионного соглашения к модулю.
- Добавлена поддержка нового рейтинга 10.4.
- Добавлены теги `{$el.ratingOnclickPlus}` и `{$el.ratingOnclickMinus}` для вывода атрибута onClick повышения и понижения рейтинга в цифровом варианте настроек.
- Добавлен новый тег `{$dleConfig}` для доступа к конфигу DLE внутри шаблона. Использовать можно так: `{if $dleConfig.rating_type == '2'}Тип рейтинга:2{/if}`
- Добавлен шаблон модуля с кучей примеров вывода данных. И подробными комменатиями о том, что там вообще происходит. Очень пригодится тем, кто работает с модулем впервые. `{THEME}/blockpro/fullexample.tpl`
- Обновлён шаблонизатор Fenom до актуальной версии. Теперь шаблонизатор работает ещё быстрее.
- Исправлена ошибка с выводом новостей не принадлежащих указанному временному интервалу. Пример ошибки: новость, опубликованная вчера попадала в выборку по праметрам `&day=1`. Теперь день "начинается" корректно и Можно вводить новости, опубликованные в только за указанные интервал дней.
- Добавлен режим афиши - вывод новостей только на ненаступившую дату. При этом параметры `&day` и `&dayCount` не вычитают, а прибавляют дни. Например для вывода афиши на послезавтра нужно прописать `?future=y&day=3&dayCount=1`. Режим афиши не зависит от настроек DLE по выводу новостей на ненаступившую дату.
- Добавлен учёт настроек DLE по публикации новостей на ненаступившую дату. Теперь модуль будет выводить новости, дата которых не наступила, если это разрешено в настройках DLE.
- Исправлена ошибка с ненужным показом постраничной навигации, когда новостей меньше, чем на две страницы.
- Добавлена новая переменная `cacheVars`, позволяющая указать значимые параметры для формирования кеша. В переменную можно передавать через запятую ключи, доступные через `$_REQUEST` или значения переменной `$dle_module`. Эта функция полезна, если требуется выводить разное оформление в блоке с новостями для разных страниц сайта. Таким образом, если прописать `&caceVars=newsid,category,forum` будет создаваться отдельный кеш для каждой новости, для каждой категории и для модуля forum (при интеграции форума).
- Добавлен новый тег `{$dleModule}` для доступа к переменной [dle_module](http://dle-news.ru/extras/online/modules_include.html) внутри шаблона модуля.
- Добавлен новый тег `{$lang}` для доступа к языковым фразам внутри шаблона. Этот тег будет полезен, если один шаблон используется для нескольких языков сайта.
- Теперь при AJAX-запросе, если страница уже закеширована - будет отдан 304 статус, что значительно ускоряет тотбражение результата и снижает нагрузку на хостинг.
- [beta] Добавлена поддержка навигации по стрелкам браузера при ajax-навигации в блоке с модулем. А так же при обновлении страницы, если пользователь находился на определённой странице в навигации блока, будет загружена эта страница. Пока такая навигация введена экспериментально и корректно работает только для одного блока на странице (или одного из блоков, если их много).
- Переработан функционал получения картинок в шаблоне. Теперь можно получать массив всех картинок, для этого третьим параметром нужно передавать не номер получаемой картинки, а cтроку `all`. При этом будут действовать все настройки ресайза и типов картинок. Такая возможность очень полезна для вывода галереи из картинок новости (или из дополнительного поля).
- Если при получении картинки попадётся смайлик или спойлер - будет взята следующая картинка(раньше возвращалась заглушка).
- Добавлена возможность получать картинку без обработки. Такая возможность нужна, если исходная картинка уже соответсвует требованиям вывода и дополнительные действия над ней производить не требуется. Получение такой картинки похоже на получение оригинала, только первым параметром необходимо указывать `intext`. Пример: `{$el.full_story|image:$noimage:'intext':'2'}` или `{$el.full_story|image:$noimage:'intext':'all'}` для получения массива всех картинок без обработки.
- Добавлена возможность указывать собственную папку для сохраения обработанных картинок. для этого последним параметром необходимо передать имя папки, начинающееся со слеша, в этом случаи путь будет постороен от корня сайта. Пример: 
```smarty
{$el.full_story|image:$noimage:'small':'all':'150':'85':'crop':true:true:'/uploads/myfolder/'}
```
Все картинки из новости будут уменьшены до 150px и сложены в папку `/uploads/myfolder/150/`
- Исправлена ошибка генерации уменьшенной копии изображения, если не указано качество создаваемой копии.
- Исправлена ошибка с некорректной генерацией строки подклчения в некоторых случаях. Вместо символа `&` вставлялся символ `¬` и удаляась часть текста строки подключения, что приводило к некорректному выводу контента через модуль.
- Заменён тип отправки формы, с post на get. Теперь при обновлении страницы через F5 форма генерации строки подключения сбрасываться не будет. 
- Переработана структура формы генератора строки подключения, теперь она более удобная и логичная.
- При генерации строки подключения больше не будут выводиться значения по умолчанию. Строка стала более понятная и короткая.
- Добавлена возможность выводить контент модуля на стороннем сайте (виджет). Для этого необходимо сгенерировать строку подключения в админке и на вкладке просмотра результатов нажать на кнопку  "Создать виджет". Далее следовать указаниям. 
- Реализована асинхронная загрузка виджета, так что можно не опасаться за подвисание страницы из-за того, что сайт-донор виджета упал или работает очень медленно.
- Добавлен шаблон-пример для корректного вывода контента на стороннем сайте. Шаблон снабжен подробными комментариями, так что проблем с перенастройкой вывода не будет.
- Добавлена сортировка новостей по количеству скачиваний прикрепленного файла или файлов `&sort=download`.
- Добавлена сортировка новостей по символьному коду `&sort=symbol`.
- Добавлена фильтрация новостей по символьному коду. Использование: `&symbols=a,A` для вывода новостей, содержащих указанные символьные коды. Или `&symbols=this` для вывода новостей текущего символьного каталога. `&notSymbols=Б,г,V,v` для игнорирования новостей, содержащих указанные символьные коды. Или `&notSymbols=Б,г,V,v` для игнорирования новостей текущего символьного каталога. 
- Добавлен новый модификатор `dump`, для реализации вывода переменной через php-функцию `print_r`. `{$el|dump}` - выведет распечатку массива новости.
- Исправлена ошибка с выводом прикрепленных файлов в новости.
- Исправлена потенциальная ошибка с выводом скрытого текста.
- Добавлена возможность вывода RSS-ленты через модуль. Теперь можно нстроить RSS канал в точности с вышими желаниями, весь функционал модуля полностью доступен и для RSS.
- Добавлен типовой шаблон для вывода RSS-ленты. Шаблон снабжен подробными комментариями, так что проблем с перенастройкой вывода не будет.
- Исправлены ошибки MySQL при некоторых сочетаниях параметров вывода новостей.
- Добавлен шаблон-пример с группировкой новостей по дате `group.tpl`. На основе этого шаблона можно делать практически любую группировку, для этого шаблон подробно прокомментирован.
- Добавлена сортировка по значению дополнительного поля. Для этого необходимо указывать `&sort=xf|fielname`, где `fielname` — название дополнительного поля. Такая сортировка будет полезна при к примеру выводе каталога товаров (по цене) или фильмов по годам производства. Пример строки подключения 
```php
{include file="engine/modules/base/blockpro.php?xfilter=price&sort=xf|price&order=new"}
```
`xfilter=price` - для отбрасывания пустых значений.
- Добавлен новый параметр `&xfSortType=string`. Этот параметр необходимо указывать, если требуется сортировка по значению дополнительного поля, при этом указанное допполе содержит текст, а не цифры.
- Исправлена ошибка генерации предпросмотра блока в админке при использовании memcache.
- Исправлена потенциальная ошибка в DLE 10.4 при сортировке типа "Хит" и попадании в выборку новостей с отрицательным рейтингом.
- Увеличена скорость выборки с фильтрацией по ID новостей и по категориям.
- Значительно увеличена скорость выборки случайных новостей на больших БД (проверено на БД с 20 000 + новостями, скорость выполнения запроса возросла c 0.3cек до 0.005cек)
- Добавлен новый параметр `&sort=asis` — сортировка "как есть". На данный момент она распространяется только на ID новостей. Такая сортировка может понадобться, если требуется вывести новости в строго определённом порядке по их ID. Для вывода следует добавить в строку подключения `&sort=asias&postId=1,5,6,15`, в этом случаи новости выведутся в том порядке, в котором заданы в параметре `postId`.
- Добавлен новый параметр `&saveRelated=y` — возможность записывать похожие новости в БД (по аналогии со стандартным функционалом). По умолчанию параметр отключен. Рекомендуется включать для ускорения работы модуля, особенно на больших БД. Похожие новости при включенной настройке будут выведены в том порядке, в котором они были записаны в БД (по умолчанию в DLE похожие новости сортируются по id).
- Обновлён установщик модуля.
- Внесены изменения в текст лицензии, п.4.5.
- Исправлена ошибка с отображением админки, если сайт установлен в подпапку
 